# é™„å½•ï¼šä¿®æ”¹æ ‘
å¥½çš„Bossï¼Œæˆ‘ç»™ä½ è¡¥å……ä¸€ä¸ª**æ–‡ä»¶æ¶æ„ä¿®æ”¹æ ‘**ï¼ŒæŒ‰ç…§ä½ è¦æ±‚çš„æ ¼å¼ï¼ˆå‚è€ƒ `file-architecture-modificationtree-zh.md` è§„èŒƒï¼‰ï¼š

---

# MinerU é›†æˆ - æ–‡ä»¶æ¶æ„ä¿®æ”¹æ ‘

```
Prisim-PaperLib---ProjectFolder/
â”œâ”€â”€ Prisim--PaperLib/
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â”œâ”€â”€ [æ–°å¢ç›®å½•] mineru/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ [æ–°å¢æ–‡ä»¶] mineru.type.ts
â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ MineruTaskState æšä¸¾ ('uploading' | 'pending' | 'running' | 'done' | 'failed')
â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ MineruConfig æ¥å£ (apiKey, modelVersion, enableOcr, enableFormula, enableTable, language, pollingIntervalSec)
â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ MineruTaskProgress æ¥å£ (extractedPages, totalPages, startTime)
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ MineruTask æ¥å£ (localId, paperId, fileName, pdfPath, batchId, dataId, state, progress, resultZipUrl, resultLocalPath, errorMsg, createdAt, updatedAt)
â”‚   â”‚   â”‚       â”œâ”€â”€ system/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ system.type.ts [ä¿®æ”¹å†…å®¹]
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨ AppConfig æ¥å£ä¸­æ–°å¢ extensions.mineru?: MineruConfig å­—æ®µ
â”‚   â”‚   â”‚       â””â”€â”€ ipc-api/
â”‚   â”‚   â”‚           â””â”€â”€ ipc-api.type.ts [ä¿®æ”¹å†…å®¹]
â”‚   â”‚   â”‚               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ–°å¢ MineruApi æ¥å£å®šä¹‰ (submitLocalOcrTask, getTasksSnapshot, downloadResult, onTaskUpdate)
â”‚   â”‚   â”‚               â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨ IpcApi æ¥å£ä¸­æ–°å¢ mineru: MineruApi å­—æ®µ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ electron/
â”‚   â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [æ–°å¢ç›®å½•] mineru/
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] mineru.service.ts
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° MinerU API è°ƒç”¨å°è£… (POST /file-urls/batch, GET /extract-results/batch/{batch_id})
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°æ–‡ä»¶ä¸Šä¼ é€»è¾‘ (PUT é¢„ç­¾å URL)
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°å…¨å±€ä»»åŠ¡è½®è¯¢å™¨ TaskPoller (å®šæ—¶è½®è¯¢æ´»è·ƒ batchï¼Œæ›´æ–°ä»»åŠ¡çŠ¶æ€)
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ç»“æœ zip ä¸‹è½½é€»è¾‘ (GET full_zip_urlï¼Œä¿å­˜åˆ°æœ¬åœ°)
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šç»´æŠ¤å†…å­˜ä»»åŠ¡è¡¨ Map<localId, MineruTask>
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šæä¾›ä»»åŠ¡æäº¤ã€çŠ¶æ€æŸ¥è¯¢ã€ç»“æœä¸‹è½½ç­‰å…¬å¼€æ–¹æ³•
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ [æ–°å¢æ–‡ä»¶] mineru-persistence.service.ts (å¯é€‰)
â”‚   â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ä»»åŠ¡æŒä¹…åŒ–åˆ° @AppData/.mineru-tasks.json
â”‚   â”‚   â”‚   â”‚   â”‚           â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°åº”ç”¨å¯åŠ¨æ—¶ä»ç¼“å­˜æ¢å¤æœªå®Œæˆä»»åŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ipc/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ [æ–°å¢ç›®å½•] mineru/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ [æ–°å¢æ–‡ä»¶] mineru.ipc.ts
â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ³¨å†Œ IPC handler 'mineru:submitLocalOcrTask' (è°ƒç”¨ mineru.service.submitLocalFileTask)
â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ³¨å†Œ IPC handler 'mineru:getTasksSnapshot' (è¿”å›å½“å‰æ‰€æœ‰ä»»åŠ¡)
â”‚   â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ³¨å†Œ IPC handler 'mineru:downloadResult' (è§¦å‘ç»“æœä¸‹è½½)
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ä»»åŠ¡æ›´æ–°å¹¿æ’­ (é€šè¿‡ webContents.send('mineru:taskUpdate') æ¨é€å¢é‡æ›´æ–°)
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ipc.register.ts [ä¿®æ”¹å†…å®¹]
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå¯¼å…¥å¹¶æ³¨å†Œ mineru IPC å¤„ç†å™¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ preload/
â”‚   â”‚   â”‚       â”œâ”€â”€ apis/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ [æ–°å¢ç›®å½•] mineru/
â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ [æ–°å¢æ–‡ä»¶] mineru.api.ts
â”‚   â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ contextBridge æš´éœ² submitLocalOcrTask (å°è£… ipcRenderer.invoke)
â”‚   â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ contextBridge æš´éœ² getTasksSnapshot (å°è£… ipcRenderer.invoke)
â”‚   â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ contextBridge æš´éœ² downloadResult (å°è£… ipcRenderer.invoke)
â”‚   â”‚   â”‚       â”‚   â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ contextBridge æš´éœ² onTaskUpdate (å°è£… ipcRenderer.onï¼Œè¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°)
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ api.aggregate.ts [ä¿®æ”¹å†…å®¹]
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå°† MineruApi èšåˆåˆ° window.api.mineru
â”‚   â”‚   â”‚       â””â”€â”€ index.d.ts [ä¿®æ”¹å†…å®¹]
â”‚   â”‚   â”‚           â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨ Window æ¥å£ä¸­å£°æ˜ api.mineru: MineruApi ç±»å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ client/
â”‚   â”‚       â””â”€â”€ src/
â”‚   â”‚           â””â”€â”€ renderer/
â”‚   â”‚               â”œâ”€â”€ stores/
â”‚   â”‚               â”‚   â””â”€â”€ [æ–°å¢ç›®å½•] mineru-task/
â”‚   â”‚               â”‚       â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] mineru-task.datasource.ts
â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ IMineruTaskDataSource æ¥å£ (submitLocalOcrTask, getTasksSnapshot, subscribeTaskUpdate)
â”‚   â”‚               â”‚       â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° DataSource å·¥å‚å‡½æ•° (ä»…è¿”å› Electron å®ç°ï¼Œæ—  Mock)
â”‚   â”‚               â”‚       â”œâ”€â”€ [æ–°å¢æ–‡ä»¶] mineru-task.electron.ts
â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° IMineruTaskDataSource æ¥å£
â”‚   â”‚               â”‚       â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ window.api.mineru è°ƒç”¨ IPC æ–¹æ³•
â”‚   â”‚               â”‚       â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå°è£…ä»»åŠ¡æ›´æ–°è®¢é˜…é€»è¾‘
â”‚   â”‚               â”‚       â””â”€â”€ [æ–°å¢æ–‡ä»¶] mineru-task.store.ts
â”‚   â”‚               â”‚           â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ Pinia Store state (tasks: Map<localId, MineruTask>, loading, error)
â”‚   â”‚               â”‚           â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®šä¹‰ getters (activeTasks, hasRunningTask, doneTasks, globalProgress)
â”‚   â”‚               â”‚           â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° action initialize() (è·å–ä»»åŠ¡å¿«ç…§ + è®¢é˜…æ›´æ–°)
â”‚   â”‚               â”‚           â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° action submitLocalOcrTask() (éªŒè¯ + è°ƒç”¨ DataSource)
â”‚   â”‚               â”‚           â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ä»»åŠ¡æ›´æ–°åˆå¹¶é€»è¾‘ (æ ¹æ® localId merge å¢é‡æ›´æ–°)
â”‚   â”‚               â”‚
â”‚   â”‚               â””â”€â”€ views/
â”‚   â”‚                   â”œâ”€â”€ SettingsPage/
â”‚   â”‚                   â”‚   â”œâ”€â”€ index.vue [ä¿®æ”¹å†…å®¹]
â”‚   â”‚                   â”‚   â”‚   â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨é¡¶éƒ¨ Tab å¯¼èˆªä¸­æ–°å¢ "æ‰©å±•" é€‰é¡¹
â”‚   â”‚                   â”‚   â”‚   â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨ "æ‰©å±•" Tab å†…å®¹åŒºæŒ‚è½½ MineruConfig ç»„ä»¶
â”‚   â”‚                   â”‚   â””â”€â”€ [æ–°å¢ç›®å½•] extensions/
â”‚   â”‚                   â”‚       â””â”€â”€ [æ–°å¢ç›®å½•] MineruConfig/
â”‚   â”‚                   â”‚           â””â”€â”€ [æ–°å¢æ–‡ä»¶] index.vue
â”‚   â”‚                   â”‚               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° MinerU é…ç½®è¡¨å• UI (API Key è¾“å…¥æ¡†ã€æ¨¡å‹ç‰ˆæœ¬å•é€‰ã€Pipeline é€‰é¡¹å¤é€‰æ¡†ã€è¯­è¨€ä¸‹æ‹‰ã€è½®è¯¢é—´éš”è¾“å…¥)
â”‚   â”‚                   â”‚               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ SystemApi.getConfigValue('extensions.mineru') åŠ è½½é…ç½®
â”‚   â”‚                   â”‚               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šé€šè¿‡ SystemApi.setConfigValue('extensions.mineru', config) ä¿å­˜é…ç½®
â”‚   â”‚                   â”‚               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç° "æµ‹è¯•è¿æ¥" æŒ‰é’®é€»è¾‘ (è°ƒç”¨ mineru.service.testConnection)
â”‚   â”‚                   â”‚               â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°è¡¨å•éªŒè¯ (pollingIntervalSec é™åˆ¶åœ¨ 5-60s èŒƒå›´)
â”‚   â”‚                   â”‚
â”‚   â”‚                   â””â”€â”€ MainPage/
â”‚   â”‚                       â”œâ”€â”€ topbar/
â”‚   â”‚                       â”‚   â””â”€â”€ index.vue [ä¿®æ”¹å†…å®¹]
â”‚   â”‚                       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šåœ¨æ ‡é¢˜æ å³ä¾§åŒºåŸŸæ–°å¢å…¨å±€è¿›åº¦æŒ‰é’®ç»„ä»¶
â”‚   â”‚                       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šä» mineruTaskStore è¯»å– globalProgress å’Œ hasRunningTask
â”‚   â”‚                       â”‚       â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ ¹æ®ä»»åŠ¡çŠ¶æ€åŠ¨æ€æ˜¾ç¤º/éšè—æŒ‰é’®ï¼Œåˆ‡æ¢å›¾æ ‡é¢œè‰²å’Œå¾½æ ‡
â”‚   â”‚                       â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ç‚¹å‡»æŒ‰é’®æ‰“å¼€/å…³é—­è¿›åº¦å¯¹è¯æ¡†é€»è¾‘
â”‚   â”‚                       â””â”€â”€ [æ–°å¢ç›®å½•] progress-dialog/
â”‚   â”‚                           â””â”€â”€ [æ–°å¢æ–‡ä»¶] index.vue
â”‚   â”‚                               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°æ‚¬æµ®å¯¹è¯æ¡†å¸ƒå±€ (Teleport to bodyï¼Œå±…ä¸­æ˜¾ç¤ºï¼Œå®½åº¦ 480-640px)
â”‚   â”‚                               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šä» mineruTaskStore è¯»å– tasks åˆ—è¡¨å¹¶æŒ‰æ—¶é—´å€’åºæ¸²æŸ“
â”‚   â”‚                               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ä»»åŠ¡è¡ŒçŠ¶æ€å±•ç¤º (pending/running æ˜¾ç¤ºè¿›åº¦æ¡ï¼Œdone æ˜¾ç¤ºå·²å®Œæˆæ ‡è®°ï¼Œfailed æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯)
â”‚   â”‚                               â”œâ”€â”€ å†…éƒ¨æ¨¡å—ï¼šå®ç°ç©ºæ€å±•ç¤º (æ— ä»»åŠ¡æ—¶æ˜¾ç¤ºæ’ç”» + æç¤ºæ–‡æ¡ˆ)
â”‚   â”‚                               â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šé¢„ç•™é‡è¯•æŒ‰é’®ä½ç½® (æœ¬è½®æš‚ä¸å®ç°è¡Œä¸º)
â”‚   â”‚
â”‚   â””â”€â”€ package.json [ä¿®æ”¹å†…å®¹]
â”‚       â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šæ–°å¢ä¾èµ– (å¦‚éœ€è¦é¢å¤–çš„ HTTP å®¢æˆ·ç«¯åº“æˆ–æ–‡ä»¶å¤„ç†åº“)
â”‚
â””â”€â”€ docs/
    â””â”€â”€ Design/
        â””â”€â”€ MinerUé›†æˆ/
            â””â”€â”€ [æ–°å¢æ–‡ä»¶] è¯¦ç»†è®¾è®¡æ–‡æ¡£.md
                â””â”€â”€ å†…éƒ¨æ¨¡å—ï¼šæœ¬è®¾è®¡æ–‡æ¡£å†…å®¹
```

---

## å…³é”®ä¿®æ”¹è¯´æ˜

### æ–°å¢æ–‡ä»¶ (15 ä¸ª)
1. **ç±»å‹å®šä¹‰**: `mineru.type.ts` (å…±äº«ç±»å‹)
2. **ä¸»è¿›ç¨‹æœåŠ¡**: `mineru.service.ts`, `mineru-persistence.service.ts`
3. **IPC å±‚**: `mineru.ipc.ts`
4. **Preload å±‚**: `mineru.api.ts`
5. **å‰ç«¯ Store**: `mineru-task.datasource.ts`, `mineru-task.electron.ts`, `mineru-task.store.ts`
6. **UI ç»„ä»¶**: `SettingsPage/extensions/MineruConfig/index.vue`, `MainPage/progress-dialog/index.vue`

### ä¿®æ”¹æ–‡ä»¶ (6 ä¸ª)
1. `system.type.ts`: æ‰©å±• AppConfig
2. `ipc-api.type.ts`: æ–°å¢ MineruApi æ¥å£
3. `ipc.register.ts`: æ³¨å†Œ MinerU IPC
4. `api.aggregate.ts`: èšåˆ MineruApi
5. `preload/index.d.ts`: ç±»å‹å£°æ˜
6. `SettingsPage/index.vue`: æ–°å¢æ‰©å±• Tab
7. `MainPage/topbar/index.vue`: æ–°å¢è¿›åº¦æŒ‰é’®

### æ–°å¢ç›®å½• (5 ä¸ª)
- `shared/types/mineru/`
- `electron/main/services/mineru/`
- `electron/main/ipc/mineru/`
- `electron/preload/apis/mineru/`
- `client/src/renderer/stores/mineru-task/`
- `client/src/renderer/views/SettingsPage/extensions/MineruConfig/`
- `client/src/renderer/views/MainPage/progress-dialog/`

---

è¿™ä¸ªä¿®æ”¹æ ‘å®Œæ•´è¦†ç›–äº†ä»å…±äº«ç±»å‹ã€ä¸»è¿›ç¨‹æœåŠ¡ã€IPC é€šä¿¡ã€Preload æš´éœ²ã€å‰ç«¯ Store åˆ° UI ç»„ä»¶çš„æ‰€æœ‰å±‚çº§ï¼ŒBossä½ å¯ä»¥æŒ‰è¿™ä¸ªç»“æ„é€æ­¥å®æ–½ã€‚
---

# Phase 1ï¼šæ¦‚å¿µæ¨¡å‹ä¸ä¸šåŠ¡è§„åˆ™

## æ ¸å¿ƒæ¦‚å¿µå®šä¹‰

- **MineruConfigï¼ˆMinerU é…ç½®ï¼‰**  
  - ä»£è¡¨å½“å‰åº”ç”¨å¯¹ MinerU æœåŠ¡çš„å…¨å±€é…ç½®ã€‚  
  - å­˜å‚¨åœ¨ `system.config.json` ä¸­ï¼Œä»¥æ˜æ–‡å½¢å¼ä¿å­˜ `apiKey` ç­‰ã€‚  
  - ç”Ÿå‘½å‘¨æœŸï¼š  
    - åº”ç”¨å¯åŠ¨æ—¶ä» `system.config.json` è¯»å–åˆ° Electron ä¸»è¿›ç¨‹ï¼Œå†é€šè¿‡ `SystemApi` æä¾›ç»™å‰ç«¯ã€‚  
    - åœ¨è®¾ç½®é¡µâ€œæ‰©å±• â†’ MinerUâ€æ›´æ–°åï¼Œé€šè¿‡ `SystemApi.setConfigValue` æŒä¹…åŒ–ã€‚

- **MineruTaskï¼ˆMinerU ä»»åŠ¡ï¼‰**  
  - ä»£è¡¨ä¸€æ¬¡å¯¹æŸä¸ª PDF å‘èµ·çš„ OCR è§£æä»»åŠ¡ã€‚  
  - ä¸åº”ç”¨å†…çš„ `PaperMeta` é€šè¿‡ `paperId` å…³è”ã€‚  
  - ä»»åŠ¡æœ¬èº«ä¸ç›´æ¥å­˜å…¥ SQLiteï¼Œè€Œæ˜¯ç”± Electron ä¸»è¿›ç¨‹ç»´æŠ¤å†…å­˜çŠ¶æ€ + å¿…è¦æ—¶è½ç›˜ï¼ˆå¦‚ `@AppData/.mineru-tasks.json`ï¼‰ã€‚  
  - å¯¹åº” MinerU çš„ **batch ä¸Šä¼  + æ‰¹é‡æŸ¥è¯¢** æ¨¡å‹ï¼š  
    - `batchId`: MinerU è¿”å›çš„æ‰¹é‡ä»»åŠ¡ IDã€‚  
    - `dataId`: ç”±æˆ‘ä»¬è‡ªå®šä¹‰ï¼Œç”¨äºåœ¨ `extract-results/batch` ä¸­è¯†åˆ«å¯¹åº”æ–‡ä»¶ã€‚

- **MineruTaskStateï¼ˆä»»åŠ¡çŠ¶æ€ï¼‰**  
  - `uploading`: æ­£åœ¨ä¸Šä¼ åˆ° MinerU OSSã€‚  
  - `pending`: MinerU å·²æ¥æ”¶æ–‡ä»¶ï¼Œç­‰å¾…æ’é˜Ÿæäº¤è§£æã€‚  
  - `running`: MinerU æ­£åœ¨è§£æï¼Œå¸¦æœ‰è¿›åº¦ä¿¡æ¯ã€‚  
  - `done`: å·²å®Œæˆï¼Œ`full_zip_url` å¯ç”¨ã€‚  
  - `failed`: è§£æå¤±è´¥ï¼Œå­˜åœ¨ `errorMsg`ã€‚  

- **MineruPollingProfileï¼ˆè½®è¯¢é…ç½®ï¼‰**  
  - `intervalSec`: è½®è¯¢é—´éš”ç§’æ•°ï¼Œç”¨æˆ·å¯åœ¨è®¾ç½®é¡µè°ƒæ•´ã€‚  
  - `minIntervalSec`: ä¾‹å¦‚ 5sï¼Œé˜²æ­¢è¿‡äºé¢‘ç¹ã€‚  
  - `maxIntervalSec`: ä¾‹å¦‚ 60sï¼Œé˜²æ­¢è¿‡æ…¢ã€‚  
  - ç”Ÿå‘½å‘¨æœŸï¼š  
    - å­˜åœ¨äº `MineruConfig` ä¸­ã€‚  
    - ä¿®æ”¹åéœ€ç«‹å³ä½œç”¨äºåå°è½®è¯¢å™¨ã€‚

---

### ä¸šåŠ¡è§„åˆ™ï¼ˆBusiness Rulesï¼‰

1. **æœ¬åœ° PDF ç»Ÿä¸€èµ°â€œæ‰¹é‡ä¸Šä¼  + æ‰¹é‡æŸ¥è¯¢â€æ¥å£**  
   - ä¸Šä¼ ï¼š`POST /file-urls/batch` è·å–é¢„ç­¾å URLï¼Œç„¶å `PUT` æ–‡ä»¶ã€‚  
   - æŸ¥è¯¢ï¼š`GET /extract-results/batch/{batch_id}` è·å–çŠ¶æ€å’Œç»“æœã€‚  
   - ä¸ºç®€å•èµ·è§ï¼Œå³ä½¿æ˜¯å•ä¸ª PDF ä¹Ÿç”¨ `files.length = 1`ã€‚

2. **æ¯ä¸ª MineruTask å¿…é¡»æœ‰å”¯ä¸€çš„ `localId` ä¸ `dataId`**  
   - `localId`: æˆ‘ä»¬å†…éƒ¨ä½¿ç”¨çš„ UUIDã€‚  
   - `dataId`: å‘é€ç»™ MinerU çš„ `data_id`ï¼Œæ¨èç”¨ `{localId}` æˆ– `{paperId}.{localId}`ï¼Œç”¨äºåœ¨ç»“æœä¸­å¯¹åº”åˆ°ä»»åŠ¡ã€‚

3. **å…¨å±€å•è½®è¯¢å™¨ï¼ˆSingle Global Pollerï¼‰**  
   - ä¸ä¸ºæ¯ä¸ªä»»åŠ¡å•ç‹¬å®šæ—¶å™¨ï¼Œè€Œæ˜¯åœ¨ `mineru.service` ä¸­ç»´æŠ¤ä¸€ä¸ªå…¨å±€ `TaskPoller`ï¼š  
     - ä¿æŒä¸€ä¸ªå¾…è½®è¯¢çš„ `batchId` é›†åˆã€‚  
     - æ¯ä¸ª tick è½®è¯¢æ‰€æœ‰æ´»è·ƒ batchï¼ˆpending/running/ç­‰å¾…ä¸Šä¼ å®Œæˆï¼‰ã€‚  
   - è½®è¯¢é—´éš”ç”± `MineruConfig.pollingIntervalSec` æ§åˆ¶ã€‚

4. **ä»»åŠ¡çŠ¶æ€åªç”±ä¸»è¿›ç¨‹æ”¹å˜**  
   - ä¸»è¿›ç¨‹æ˜¯ MinerU çŠ¶æ€çš„â€œå•ä¸€äº‹å®æ¥æºï¼ˆSingle Source of Truthï¼‰â€ã€‚  
   - æ¸²æŸ“è¿›ç¨‹åªé€šè¿‡ï¼š  
     - IPC `invoke` è·å–å½“å‰ä»»åŠ¡å¿«ç…§ã€‚  
     - IPC `on('mineru:taskUpdate')` è®¢é˜…å¢é‡æ›´æ–°ã€‚

5. **é…ç½®ä¸ä»»åŠ¡è§£è€¦**  
   - ä¿®æ”¹ MinerU é…ç½®ï¼ˆAPI Keyã€æ¨¡å‹ç‰ˆæœ¬ã€è½®è¯¢é—´éš”ï¼‰åªå½±å“**æ–°ä»»åŠ¡ä¸è½®è¯¢ç­–ç•¥**ï¼Œä¸ retro-apply åˆ°å·²æäº¤çš„è¿œç«¯ä»»åŠ¡ã€‚

6. **ç»“æœå¤„ç†åˆ†ä¸¤æ­¥**ï¼ˆæœ¬è½®åªåšç¬¬ä¸€æ­¥ï¼‰  
   - ç¬¬ä¸€æ­¥ï¼šä¸‹è½½ `full_zip_url` åˆ°æœ¬åœ°æŒ‡å®šç›®å½•ï¼Œè®°å½• `resultLocalPath`ã€‚  
   - ç¬¬äºŒæ­¥ï¼ˆæœªæ¥è¿­ä»£ï¼‰ï¼šè§£æ zip å†…çš„ Markdown/JSONï¼Œå†™å…¥é¡¹ç›®åº“æˆ–å±•ç¤ºã€‚  
   - æœ¬è½®è®¾è®¡ä¸­ï¼Œåªè¦æ±‚å®Œæˆâ€œç»“æœæ–‡ä»¶ä¸‹è½½ä¸è·¯å¾„ä¿å­˜â€ã€‚

---

# Phase 2ï¼šæ–‡ä»¶ç‰©ç†æ¶æ„

> è·¯å¾„éµå®ˆå½“å‰é¡¹ç›®çš„ `apps/client / apps/electron / apps/shared` è§„èŒƒã€‚

## 2.1 Shared ç±»å‹å±‚

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [NEW] | `apps/shared/types/mineru/mineru.type.ts` | å®šä¹‰ MinerU ç›¸å…³çš„å…±äº«ç±»å‹ï¼ˆé…ç½®ã€ä»»åŠ¡ã€çŠ¶æ€æšä¸¾ï¼‰ã€‚ä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘æˆ– HTTP ç»†èŠ‚ã€‚ |
| [UPDATE] | `apps/shared/types/system/system.type.ts`ï¼ˆæˆ–å½“å‰ç³»ç»Ÿé…ç½®ç±»å‹æ–‡ä»¶ï¼‰ | åœ¨ `AppConfig` ä¸­å¢åŠ  `extensions.mineru` å­—æ®µã€‚ä»…è´Ÿè´£ç±»å‹ï¼Œå…·ä½“è¯»å–å†™å…¥ç”± system æœåŠ¡å¤„ç†ã€‚ |
| [UPDATE] | `apps/shared/types/ipc-api/ipc-api.type.ts` | åœ¨ `IpcApi` ä¸­å¢åŠ  `mineru: MineruApi`ï¼Œç”¨äº `window.api.mineru`ã€‚ |

---

## 2.2 Electron ä¸»è¿›ç¨‹

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [NEW] | `apps/electron/main/services/mineru/mineru.service.ts` | MinerU æ ¸å¿ƒæœåŠ¡ã€‚è´Ÿè´£ï¼šè¯»å– MineruConfigã€æ„é€ è¯·æ±‚ä½“ã€è°ƒç”¨ MinerU APIã€ä¸Šä¼ æ–‡ä»¶ã€è½®è¯¢ç»“æœã€ä¸‹è½½ç»“æœã€ç»´æŠ¤å†…å­˜ä»»åŠ¡è¡¨ä¸å¯é€‰è½ç›˜ç¼“å­˜ã€‚ä¸æ„ŸçŸ¥ UIã€‚ |
| [NEW] | `apps/electron/main/ipc/mineru/mineru.ipc.ts` | IPC Handlerã€‚è´Ÿè´£ï¼šå®šä¹‰ `mineru:submitLocalOcrTask`ã€`mineru:getTasksSnapshot` ç­‰ IPC æ¥å£ï¼Œå°†æ¸²æŸ“å±‚è¯·æ±‚è½¬äº¤ç»™ `mineru.service`ï¼Œå¹¶å°†ä»»åŠ¡æ›´æ–°é€šè¿‡ `webContents.send` å¹¿æ’­ã€‚ |
| [UPDATE] | `apps/electron/main/ipc/ipc.register.ts` | æ³¨å†Œæ–°çš„ Mineru IPC å¤„ç†å™¨ã€‚ |
| [OPTIONAL] | `apps/electron/main/services/mineru/mineru-persistence.service.ts`ï¼ˆå¦‚é€»è¾‘è¿‡é•¿å¯æ‹†ï¼‰ | ä»…è´Ÿè´£åœ¨åº”ç”¨é€€å‡º/å¯åŠ¨æ—¶ï¼Œå°†æœªå®Œæˆä»»åŠ¡è½ç›˜åˆ° `@AppData/.mineru-tasks.json` å¹¶æ¢å¤ã€‚ |

---

## 2.3 Electron Preload å±‚

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [NEW] | `apps/electron/preload/apis/mineru/mineru.api.ts` | é€šè¿‡ `contextBridge` æš´éœ² `window.api.mineru`ï¼šå°è£… `ipcRenderer.invoke/on`ã€‚ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ã€‚ |
| [UPDATE] | `apps/electron/preload/apis/api.aggregate.ts` | å°† MineruApi èšåˆåˆ°æ€»çš„ `window.api` å¯¹è±¡ä¸­ã€‚ |
| [UPDATE] | `apps/electron/preload/index.d.ts` | å°† `window.api.mineru` ç±»å‹å£°æ˜æ¥å…¥ã€‚ |

---

## 2.4 Client æ¸²æŸ“å±‚ - Store & DataSource

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [NEW] | `apps/client/src/renderer/stores/mineru-task/mineru-task.datasource.ts` | å®šä¹‰ `IMineruTaskDataSource` æ¥å£ & å·¥å‚ï¼ŒæŒ‰ DataSource è§„èŒƒåªåš Electron å®ç°ï¼ˆæ— éœ€ mockï¼‰ã€‚ |
| [NEW] | `apps/client/src/renderer/stores/mineru-task/mineru-task.electron.ts` | é€šè¿‡ `window.api.mineru` è°ƒç”¨ IPC å®ç° DataSource æ¥å£ã€‚æ—  UI çŠ¶æ€ã€æ— ä¸šåŠ¡è§„åˆ™ï¼Œä»…è´Ÿè´£æ•°æ®è·å–ã€‚ |
| [NEW] | `apps/client/src/renderer/stores/mineru-task/mineru-task.store.ts` | Pinia Storeã€‚ç®¡ç†å‰ç«¯çš„ä»»åŠ¡åˆ—è¡¨å¯è§†çŠ¶æ€ï¼ˆåŠ è½½ã€é”™è¯¯ï¼‰ï¼Œæä¾› action è§¦å‘ OCRã€è®¢é˜…ä»»åŠ¡æ›´æ–°ã€‚ä»…è°ƒç”¨ DataSourceã€‚ |

---

## 2.5 Client æ¸²æŸ“å±‚ - è®¾ç½®é¡µé¢ & UI ç»„ä»¶

> å…·ä½“è·¯å¾„ä»¥ä½ çš„å®é™…å®ç°ä¸ºå‡†ï¼Œè¿™é‡ŒæŒ‰ç›®å½•è§„èŒƒå‡å®šï¼š

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [UPDATE] | `apps/client/src/renderer/views/SettingsPage/index.vue`ï¼ˆæˆ–ç°æœ‰è®¾ç½®é¡µä¸» viewï¼‰ | åœ¨é¡¶éƒ¨/ä¾§è¾¹ navbar å¢åŠ  â€œæ‰©å±•â€ Tabï¼Œå¹¶åœ¨æ­¤ Tab ä¸­æŒ‚è½½ MinerU é…ç½®é¢æ¿ã€‚ä»…è´Ÿè´£è·¯ç”±å’ŒåŒºåŸŸåˆ’åˆ†ã€‚ |
| [NEW] | `apps/client/src/renderer/views/SettingsPage/extensions/MineruConfig/index.vue` | MinerU é…ç½®åŒº UI å®ç°ã€‚è´Ÿè´£ä¸ `system.store` æˆ– `SystemApi` äº¤äº’ï¼Œè¯»å–/ä¿å­˜ MineruConfigï¼›ä¸ç›´æ¥æ“ä½œ MinerU ä»»åŠ¡ã€‚ |

---

## 2.6 Client æ¸²æŸ“å±‚ - æ ‡é¢˜æ  & è¿›åº¦å¯¹è¯æ¡†

| æ“ä½œ | è·¯å¾„ | èŒè´£è¾¹ç•Œ |
|------|------|----------|
| [UPDATE] | `apps/client/src/renderer/views/MainPage/topbar/index.vue` | åœ¨æ ‡é¢˜æ å³ä¾§å¢åŠ â€œå…¨å±€è¿›åº¦æŒ‰é’®â€ï¼ˆå›¾æ ‡ + è®¡æ•°ï¼‰ã€‚å“åº”æ¥è‡ª `mineru-task.store` çš„èšåˆçŠ¶æ€ï¼Œè´Ÿè´£æ‰“å¼€/å…³é—­è¿›åº¦å¯¹è¯æ¡†ã€‚ |
| [NEW] | `apps/client/src/renderer/views/MainPage/progress-dialog/index.vue` | æ‚¬æµ®å¯¹è¯æ¡†ç»„ä»¶ï¼ˆTeleport åˆ° bodyï¼‰ã€‚å±•ç¤º MinerU ä»»åŠ¡åˆ—è¡¨ã€çŠ¶æ€å’Œè¿›åº¦æ¡ã€‚æœ¬è½®ä»…åšå±•ç¤ºï¼Œä¸å¼ºåˆ¶å®ç°â€œé‡è¯•ã€æ‰“å¼€ç»“æœç›®å½•â€ç­‰æ“ä½œï¼Œä½†é¢„ç•™æŒ‰é’®ä½ã€‚ |

---

# Phase 3ï¼šåŸå­çº§é€»è¾‘æµ

### æµç¨‹ Aï¼šç”¨æˆ·å¯¹å•ä¸ª PDF è§¦å‘ MinerU OCR

**è§¦å‘æ¡ä»¶**ï¼š  
- ç”¨æˆ·åœ¨æŸä¸ª PDF å…¥å£ï¼ˆä¾‹å¦‚è®ºæ–‡å¡ç‰‡èœå•ã€é˜…è¯»é¡µé¢ï¼‰ç‚¹å‡»â€œä½¿ç”¨ MinerU OCR è§£æâ€ã€‚

**åŸå­æ­¥éª¤åºåˆ—**ï¼š

1. **éªŒè¯ (Validation)**  
   - è¾“å…¥ï¼š`paperId`, `pdfPath`ã€‚  
   - Store é€šè¿‡ library / paper ç›¸å…³æ¨¡å—æ ¡éªŒï¼š  
     - `pdfPath` æ˜¯å¦å­˜åœ¨ä¸”å¯è¯»ï¼›  
     - MineruConfig ä¸­ `apiKey` æ˜¯å¦éç©ºï¼›  
   - è‹¥å¤±è´¥ï¼šåœ¨å‰ç«¯å¼¹å‡ºé”™è¯¯æç¤ºï¼ˆä¾‹å¦‚ï¼šâ€œæœªé…ç½® MinerU API Keyâ€ï¼‰ï¼Œä¸­æ–­ï¼Œä¸è§¦å‘ IPCã€‚

2. **åˆ›å»ºæœ¬åœ°ä»»åŠ¡ (Create Local Task)**  
   - æ¸²æŸ“è¿›ç¨‹ï¼šè°ƒç”¨ `mineruTaskStore.submitLocalOcrTask(paperId, pdfPath)`ã€‚  
   - Storeï¼š  
     - ç”Ÿæˆ `localId = uuid()`ï¼›  
     - ç”Ÿæˆ `dataId = localId`ï¼ˆæˆ– `paperId.localId`ï¼‰ï¼›  
     - ä¹è§‚åœ¨æœ¬åœ° `tasks` ä¸­æ’å…¥ä¸€ä¸ª `MineruTask`ï¼š  
       - state = `'uploading'`  
       - progress = undefined  
   - ç„¶åè°ƒç”¨ DataSourceï¼š`MineruDataSource.submitLocalFileTask(paperId, pdfPath, dataId)`ã€‚

3. **è¯·æ±‚é¢„ç­¾åä¸Šä¼  URL (Apply Upload URLs)**  
   - DataSource â†’ Preload â†’ IPC â†’ `mineru.service.submitLocalFileTask`ï¼š  
   - `mineru.service`ï¼š  
     - ä» `system.config` ä¸­è¯»å– MineruConfigã€‚  
     - æ„é€  `POST /file-urls/batch` è¯·æ±‚ä½“ï¼š  
       - `files: [{ name: <æ–‡ä»¶å>, data_id: <dataId> }]`  
       - æ¨¡å‹ç›¸å…³å­—æ®µï¼š`model_version`, `enable_ocr`, `enable_formula`, `enable_table`, `language` ç­‰ä»é…ç½®æ³¨å…¥ã€‚  
     - å‘é€è¯·æ±‚ï¼Œå¤„ç†å“åº”ï¼š  
       - æˆåŠŸï¼šå–å¾— `batch_id` å’Œ `file_urls[0]`ã€‚  
       - å¤±è´¥ï¼šæ ‡è®°ä»»åŠ¡ä¸º `failed`ï¼Œè®¾ç½® errorMsgï¼Œè¿”å›åˆ°æ¸²æŸ“å±‚ã€‚

4. **ä¸Šä¼ æ–‡ä»¶åˆ° MinerU OSS (Upload File)**  
   - `mineru.service` ä½¿ç”¨ `PUT file_urls[0]` ä¸Šä¼ æœ¬åœ° `pdfPath` å†…å®¹ï¼š  
     - ä¸Šä¼ è¿‡ç¨‹ä¸ºé˜»å¡ Promiseï¼Œä½†åœ¨ä¸»è¿›ç¨‹ä¸­æ‰§è¡Œï¼Œä¸é˜»å¡ UIã€‚  
     - ä¸Šä¼ æˆåŠŸï¼š  
       - åˆ›å»º/æ›´æ–°å†…å­˜ä»»åŠ¡è®°å½•ï¼š  
         - `batchId`, `dataId`, `state = 'pending'`ï¼Œ`paperId`, `pdfPath` ç­‰ã€‚  
       - å°† `batchId` æ·»åŠ åˆ° `TaskPoller` çš„æ´»è·ƒé›†åˆä¸­ã€‚  
     - ä¸Šä¼ å¤±è´¥ï¼š  
       - ä»»åŠ¡ `state = 'failed'`ï¼Œ`errorMsg = 'æ–‡ä»¶ä¸Šä¼ å¤±è´¥...'`ã€‚

5. **æ›´æ–°æ¸²æŸ“å±‚ä»»åŠ¡çŠ¶æ€ (Initial Sync)**  
   - `mineru.service` é€šè¿‡ IPC `event`ï¼š`mineru:taskUpdate`ï¼Œå°†æ–°ä»»åŠ¡çŠ¶æ€å¹¿æ’­ç»™å‰ç«¯ã€‚  
   - `mineru-task.store` åœ¨è®¢é˜…å›è°ƒä¸­ï¼š  
     - æ ¹æ® `localId` / `batchId + dataId` åˆå¹¶æ›´æ–°ã€‚  
     - è‹¥æ˜¯æ–°å¢ä»»åŠ¡ï¼Œåˆ™æ’å…¥ã€‚  
   - è¿›åº¦æŒ‰é’®å’Œè¿›åº¦å¯¹è¯æ¡†è‡ªåŠ¨å“åº”çŠ¶æ€å˜åŒ–ã€‚

---

### æµç¨‹ Bï¼šå…¨å±€è½®è¯¢ MinerU ä»»åŠ¡çŠ¶æ€

**è§¦å‘æ¡ä»¶**ï¼š  
- æœ‰è‡³å°‘ä¸€ä¸ªä»»åŠ¡ `state âˆˆ { 'pending', 'running' }`ã€‚  
- MinerUConfig ä¸­ `pollingIntervalSec >= minIntervalSec`ã€‚

**åŸå­æ­¥éª¤åºåˆ—**ï¼š

1. **è½®è¯¢å™¨åˆå§‹åŒ– (Poller Init)**  
   - `mineru.service` åœ¨é¦–æ¬¡æœ‰ä»»åŠ¡åŠ å…¥æ—¶å¯åŠ¨ `TaskPoller`ï¼š  
     - å®šæ—¶å™¨å‘¨æœŸ = `pollingIntervalSec * 1000`ã€‚  
     - æ¯ Tick è°ƒç”¨ `pollActiveBatches()`ã€‚

2. **æ”¶é›†æ´»è·ƒ batch åˆ—è¡¨ (Collect Batches)**  
   - `pollActiveBatches()`ï¼š  
     - ä»å†…å­˜ä»»åŠ¡è¡¨ä¸­è¿‡æ»¤ `state âˆˆ { 'pending', 'running' }` çš„ä»»åŠ¡ï¼ŒæŒ‰ `batchId` åˆ†ç»„ã€‚  
     - å¾—åˆ°éœ€è¦è½®è¯¢çš„ `batchId[]`ã€‚

3. **è½®è¯¢ MinerU æ‰¹é‡ç»“æœ (Fetch Batch Results)**  
   - å¯¹æ¯ä¸ª `batchId`ï¼š  
     - è°ƒç”¨ `GET /extract-results/batch/{batch_id}`ã€‚  
     - è§£æè¿”å›ä½“ï¼š  
       - `extract_result[]`ï¼šæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å« `file_name`, `state`, `full_zip_url`, `err_msg`, `extract_progress` ç­‰ã€‚  
     - å¯¹äºæ¯ä¸€æ¡ `extract_result[i]`ï¼š  
       - ä½¿ç”¨ `data_id`ï¼ˆå¦‚æœæœ‰ï¼‰æˆ– `file_name` åŒ¹é…æœ¬åœ° `MineruTask`ã€‚  

4. **æ›´æ–°ä»»åŠ¡çŠ¶æ€ (Merge State)**  
   - å¯¹åŒ¹é…åˆ°çš„ä»»åŠ¡ï¼š  
     - å¦‚æœ `state=running`ï¼šæ›´æ–°æœ¬åœ°ä»»åŠ¡ï¼š  
       - `state = 'running'`ï¼Œ  
       - `progress = { extractedPages, totalPages, startTime }`ã€‚  
     - å¦‚æœ `state=done` ä¸” `full_zip_url` éç©ºï¼š  
       - è®¾ç½® `state = 'done'`ï¼Œ`resultZipUrl = full_zip_url`ã€‚  
       - å°†ä»»åŠ¡åŠ å…¥â€œå¾…ä¸‹è½½é˜Ÿåˆ—â€ï¼ˆè§æµç¨‹ Cï¼‰ã€‚  
     - å¦‚æœ `state=failed`ï¼š  
       - è®¾ç½® `state = 'failed'`ï¼Œ`errorMsg = err_msg`ã€‚  

5. **å¹¿æ’­æ›´æ–°åˆ°æ¸²æŸ“å±‚ (Broadcast Updates)**  
   - æœ¬è½®ä¸­è¢«ä¿®æ”¹çš„ä»»åŠ¡ï¼Œæ‰“åŒ…å½¢æˆä¸€ä¸ª `MineruTaskUpdate[]`ï¼š  
     - `mineru.service` è°ƒç”¨ `webContents.send('mineru:taskUpdate', updates)`ã€‚  
   - å‰ç«¯ `mineru-task.store` æ ¹æ® `localId` é€ä¸ª mergeï¼Œè§¦å‘ UI å“åº”å¼æ›´æ–°ã€‚

6. **è½®è¯¢å™¨åœç”¨ç­–ç•¥ (Poller Stop)**  
   - è‹¥æ‰€æœ‰ä»»åŠ¡ `state âˆˆ { 'done', 'failed' }` ä¸”â€œå¾…ä¸‹è½½é˜Ÿåˆ—â€ä¸ºç©ºï¼š  
     - åœæ­¢å®šæ—¶å™¨ã€‚  
   - å½“åç»­æœ‰æ–°ä»»åŠ¡æäº¤æ—¶ï¼Œå†æ¬¡åˆ›å»ºå®šæ—¶å™¨ã€‚

---

### æµç¨‹ Cï¼šä¸‹è½½ç»“æœ zip æ–‡ä»¶ï¼ˆå¯å¼‚æ­¥ï¼‰

**è§¦å‘æ¡ä»¶**ï¼š  
- æŸä¸ªä»»åŠ¡ `state` ä» `running` å˜ä¸º `done`ï¼Œä¸”å¸¦æœ‰ `resultZipUrl`ã€‚

**åŸå­æ­¥éª¤åºåˆ—**ï¼š

1. **ç¡®å®šæœ¬åœ°å­˜å‚¨è·¯å¾„ (Resolve Local Path)**  
   - ç›®æ ‡ç›®å½•å»ºè®®ï¼š  
     - `<AppData>/MineruResults/{paperId}/{localId}/result.zip`ã€‚  
   - ä½¿ç”¨ç³»ç»ŸæœåŠ¡æä¾›çš„åº”ç”¨æ•°æ®è·¯å¾„ï¼ˆå·²æœ‰ `SystemApi.getPaths()`ï¼‰ã€‚

2. **ä¸‹è½½ zip (Download)**  
   - `mineru.service.downloadResultZip(task)`ï¼š  
     - ä½¿ç”¨ `GET resultZipUrl` ä¸‹è½½äºŒè¿›åˆ¶æ•°æ®å¹¶å†™å…¥ç›®æ ‡è·¯å¾„ã€‚  
     - æˆåŠŸåæ›´æ–°ä»»åŠ¡ï¼š  
       - `resultLocalPath` = æœ¬åœ°è·¯å¾„ã€‚  
       - å¯åœ¨ä»»åŠ¡å¯¹è±¡ä¸­æ–°å¢å­—æ®µ `hasLocalCopy = true`ã€‚  

3. **æ›´æ–°å‰ç«¯çŠ¶æ€**  
   - åŒæ ·é€šè¿‡ `mineru:taskUpdate` é€šçŸ¥å‰ç«¯ä»»åŠ¡çš„ `resultLocalPath` å·²å°±ç»ªã€‚  
   - è¿›åº¦é¢æ¿ä¸­å¯ä»¥æ˜¾ç¤ºâ€œå·²ä¸‹è½½â€æ ‡è®°ï¼ˆæœ¬è½®å¦‚æœä¸æƒ³å®ç°æ“ä½œæŒ‰é’®ï¼Œå¯ä»¥åªå±•ç¤ºçŠ¶æ€æ–‡æœ¬ï¼‰ã€‚

---

### æµç¨‹ Dï¼šåº”ç”¨é‡å¯åçš„ä»»åŠ¡æ¢å¤

**è§¦å‘æ¡ä»¶**ï¼š  
- åº”ç”¨å¯åŠ¨æ—¶ï¼Œ`mineru.service` æ£€æµ‹æ˜¯å¦å­˜åœ¨å†å²ä»»åŠ¡ç¼“å­˜æ–‡ä»¶ã€‚

**åŸå­æ­¥éª¤åºåˆ—**ï¼š

1. **è¯»å–ç¼“å­˜ (Load Cache)**  
   - ä» `@AppData/.mineru-tasks.json` ä¸­è¯»å–ä¸Šä¸€æ¬¡é€€å‡ºå‰ä¿å­˜çš„ MineruTask åˆ—è¡¨ã€‚  

2. **è¿‡æ»¤ä¸é‡å»º (Filter & Reattach)**  
   - è¿‡æ»¤æ‰ï¼š  
     - å·² `done` ä¸” `resultLocalPath` å­˜åœ¨å¯è¯»çš„ä»»åŠ¡ï¼ˆå¯è§†ä¸ºå†å²è®°å½•ï¼Œä¸å†è½®è¯¢ï¼‰ã€‚  
   - å¯¹ `state âˆˆ { 'pending', 'running' }` çš„ä»»åŠ¡ï¼š  
     - é‡æ–°åŠ å…¥å†…å­˜ä»»åŠ¡è¡¨ï¼›  
     - å°†å…¶ `batchId` åŠ å…¥æ´»è·ƒè½®è¯¢é›†åˆã€‚  

3. **å¯åŠ¨è½®è¯¢å™¨ (Start Poller)**  
   - è‹¥æœ‰è‡³å°‘ä¸€ä¸ªæ´»è·ƒä»»åŠ¡ï¼šç«‹å³å¯åŠ¨ `TaskPoller` å¹¶è¿›è¡Œä¸€æ¬¡ `pollActiveBatches()`ã€‚  

4. **é€šçŸ¥å‰ç«¯**  
   - å¯åŠ¨åç¬¬ä¸€æ¬¡åŠ è½½ä»»åŠ¡å¿«ç…§æ—¶ï¼Œå‰ç«¯ `mineru-task.store` è°ƒç”¨ `getTasksSnapshot()`ï¼Œè·å¾—æ‰€æœ‰å½“å‰ä»»åŠ¡åˆ—è¡¨ç”¨äºå±•ç¤ºã€‚  

---

# Phase 4ï¼šç±»å‹ä¸æ¥å£å®šä¹‰ï¼ˆType Logicï¼‰

> ä»¥ä¸‹ä¸ºè®¾è®¡çº§ TypeScript ä¼ªä»£ç ï¼Œå®é™…è½åœ°æ—¶æŒ‰ç°æœ‰ç±»å‹æ–‡ä»¶æ‹†åˆ†ã€‚

## 4.1 å…±äº«ç±»å‹

```ts
// apps/shared/types/mineru/mineru.type.ts

export type MineruTaskState =
  | 'uploading'
  | 'pending'
  | 'running'
  | 'done'
  | 'failed'

export interface MineruConfig {
  apiKey: string
  modelVersion: 'pipeline' | 'vlm'
  enableOcr: boolean        // pipeline æ¨¡å¼æœ‰æ•ˆ
  enableFormula: boolean    // pipeline æ¨¡å¼æœ‰æ•ˆ
  enableTable: boolean      // pipeline æ¨¡å¼æœ‰æ•ˆ
  language: string          // é»˜è®¤ 'ch'
  pollingIntervalSec: number // ç”¨æˆ·å¯é…ç½®ï¼Œé™åˆ¶åœ¨ [min,max]
}

export interface MineruTaskProgress {
  extractedPages: number
  totalPages: number
  startTime: string // ISO æˆ– MinerU è¿”å›çš„æ—¶é—´å­—ç¬¦ä¸²
}

export interface MineruTask {
  localId: string         // UUID
  paperId: string
  fileName: string
  pdfPath: string

  batchId: string
  dataId: string

  state: MineruTaskState
  progress?: MineruTaskProgress

  resultZipUrl?: string
  resultLocalPath?: string
  errorMsg?: string

  createdAt: number
  updatedAt: number
}
```

`AppConfig` æ‰©å±•ï¼ˆåœ¨ç³»ç»Ÿé…ç½®ç±»å‹ä¸­ï¼‰ï¼š

```ts
export interface AppConfig {
  // ...å·²æœ‰å­—æ®µ
  extensions?: {
    mineru?: MineruConfig
    // æœªæ¥å¯æ‰©å±•å…¶ä»–æ‰©å±•
  }
}
```

---

## 4.2 IPC / Preload API

```ts
// apps/shared/types/ipc-api/ipc-api.type.ts

export interface MineruApi {
  /** æäº¤ä¸€ä¸ªæœ¬åœ° PDF çš„ OCR ä»»åŠ¡ */
  submitLocalOcrTask(params: {
    paperId: string
    pdfPath: string
    fileName: string
  }): Promise<MineruTask>

  /** è·å–å½“å‰æ‰€æœ‰ä»»åŠ¡å¿«ç…§ï¼ˆç”¨äºå¯åŠ¨ååˆå§‹åŒ–ï¼‰ */
  getTasksSnapshot(): Promise<MineruTask[]>

  /** æ‰‹åŠ¨è§¦å‘æŸä¸ªä»»åŠ¡çš„ç»“æœä¸‹è½½ï¼ˆå¯é€‰ï¼‰ */
  downloadResult(localId: string): Promise<void>

  /** è®¢é˜…ä»»åŠ¡æ›´æ–°äº‹ä»¶ */
  onTaskUpdate(
    callback: (updates: MineruTask[]) => void
  ): () => void
}

// IpcApi èšåˆ
export interface IpcApi {
  // ...å·²æœ‰ window/system/library/utils
  mineru: MineruApi
}
```

Preload å±‚ï¼š`mineru.api.ts` ä¸­ç®€å•å°è£… `ipcRenderer.invoke/on`ï¼Œä¸å†èµ˜è¿°ã€‚

---

## 4.3 DataSource æ¥å£

```ts
// apps/client/src/renderer/stores/mineru-task/mineru-task.datasource.ts

export interface IMineruTaskDataSource {
  submitLocalOcrTask(paperId: string, pdfPath: string, fileName: string): Promise<MineruTask>
  getTasksSnapshot(): Promise<MineruTask[]>
  subscribeTaskUpdate(callback: (updates: MineruTask[]) => void): () => void
}
```

Electron å®ç°ï¼šé€šè¿‡ `window.api.mineru` å®ç°ä¸Šè¿°æ¥å£ã€‚

---

## 4.4 Store æ¥å£ï¼ˆç®€è¿°ï¼‰

```ts
// mineru-task.store.ts

interface MineruTaskStoreState {
  tasks: Map<string, MineruTask>  // key: localId
  loading: boolean
  error: Error | null
}

interface MineruTaskStoreGetters {
  activeTasks: MineruTask[]       // pending/running
  hasRunningTask: boolean
  doneTasks: MineruTask[]
  globalProgress: {
    total: number
    running: number
    failed: number
    done: number
  }
}

interface MineruTaskStoreActions {
  initialize(): Promise<void>     // è·å–å¿«ç…§ + è®¢é˜…æ›´æ–°
  submitLocalOcrTask(paperId: string, pdfPath: string, fileName: string): Promise<void>
}
```

---

# Phase 5ï¼šUI / äº¤äº’çŠ¶æ€è§„çº¦

## 5.1 è®¾ç½®é¡µ - æ‰©å±• Tab â†’ MinerU é…ç½®åŒº

### å¸ƒå±€

- **å¸ƒå±€æ¨¡å¼**ï¼šè®¾ç½®é¡µå†…éƒ¨ Tab + è¡¨å•åŒºåŸŸã€‚
- **å±‚çº§ç»“æ„**ï¼š
  1. é¡¶éƒ¨è®¾ç½®é¡µå¯¼èˆªï¼š`å¸¸è§„ / å¤–è§‚ / è·¯å¾„ / æ‰©å±• / ...`
  2. é€‰ä¸­â€œæ‰©å±•â€Tab æ—¶ï¼Œå·¦ä¾§åˆ—å‡ºæ‰©å±•åˆ—è¡¨ï¼ˆå½“å‰åªæœ‰ MinerUï¼‰ï¼Œå³ä¾§ä¸º MinerU é…ç½®è¡¨å•ã€‚

### MinerU é…ç½®ç»„ä»¶çŠ¶æ€

- **é»˜è®¤æ€ (Default)**ï¼š
  - ä» `SystemApi.getConfigValue('extensions.mineru')` åŠ è½½é…ç½®ï¼›  
  - è¡¨å•æ˜¾ç¤ºå½“å‰é…ç½®å€¼ï¼›  
  - â€œä¿å­˜â€æŒ‰é’®ç¦ç”¨ï¼ˆç›´åˆ°è¡¨å•æœ‰å˜æ›´ï¼‰ã€‚

- **åŠ è½½æ€ (Loading)**ï¼š
  - åˆæ¬¡è¿›å…¥æ—¶æ˜¾ç¤ºå°å‹ loadingï¼ˆå¦‚â€œæ­£åœ¨åŠ è½½ MinerU é…ç½®...â€ï¼‰ï¼›  
  - ç¦æ­¢äº¤äº’ã€‚

- **ç¼–è¾‘æ€ (Dirty)**ï¼š
  - è¡¨å•æœ‰ä¿®æ”¹ä½†æœªä¿å­˜ï¼Œæ˜¾ç¤ºâ€œä¿å­˜â€æŒ‰é’®é«˜äº®ï¼›  
  - ç¦»å¼€é¡µé¢æ—¶å¦‚æœ‰æœªä¿å­˜ä¿®æ”¹ï¼Œå¯è§†æƒ…å†µæç¤ºï¼ˆå¯åç»­è¿­ä»£ï¼‰ã€‚

- **ä¿å­˜ä¸­ (Saving)**ï¼š
  - ç‚¹å‡»â€œä¿å­˜â€åç¦ç”¨è¡¨å•æ§ä»¶ï¼Œæ˜¾ç¤ºå° loadingï¼›  
  - æˆåŠŸï¼šæç¤ºâ€œä¿å­˜æˆåŠŸâ€ï¼›  
  - å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚å†™ config æ–‡ä»¶å¤±è´¥ï¼‰ã€‚

- **äº¤äº’é€»è¾‘**ï¼š
  - **æµ‹è¯•è¿æ¥æŒ‰é’®**ï¼š  
    - è°ƒç”¨ä¸€ä¸ªç®€æ˜“ `mineru.service.testConnection()`ï¼ˆå‘ä¸€ä¸ªè½»é‡è¯·æ±‚ï¼Œå¦‚è·å– profile æˆ–æäº¤ä¸€ä¸ªæ— æ•ˆè°ƒç”¨ï¼‰ï¼ŒéªŒè¯ `apiKey`ã€‚  
    - æˆåŠŸï¼šæ˜¾ç¤ºç»¿è‰²æç¤ºï¼ˆâ€œè¿æ¥æˆåŠŸâ€ï¼‰ï¼›  
    - å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ + å¼•å¯¼ç”¨æˆ·æ£€æŸ¥ API Keyã€‚

---

## 5.2 æ ‡é¢˜æ è¿›åº¦æŒ‰é’®

### å¯è§æ€§çŠ¶æ€

- **éšè—æ€**ï¼š
  - æ²¡æœ‰ä»»ä½• MineruTaskï¼ˆä»»åŠ¡åˆ—è¡¨ä¸ºç©ºï¼‰æ—¶ä¸æ˜¾ç¤ºå›¾æ ‡ã€‚

- **é™é»˜æ€ (Idle)**ï¼š
  - ä»…æœ‰ `done` æˆ– `failed` ä»»åŠ¡ä½†å½“å‰æ²¡æœ‰ `running`/`pending` æ—¶ï¼š  
    - å›¾æ ‡æ˜¾ç¤ºä¸ºç°è‰²ç»Ÿè®¡ï¼ˆå¦‚ â€œğŸ“Š 3â€ï¼‰ã€‚  
    - ç‚¹å‡»å¯æŸ¥çœ‹å†å²ä»»åŠ¡åˆ—è¡¨ã€‚

- **æ´»è·ƒæ€ (Active)**ï¼š
  - å­˜åœ¨ `running` æˆ– `pending` ä»»åŠ¡ï¼š  
    - å›¾æ ‡æ˜¾ç¤ºä¸ºé«˜äº®ï¼ˆé¢œè‰²æˆ–åŠ¨æ€å°ç‚¹ï¼‰ï¼›  
    - å¯ä»¥åœ¨å›¾æ ‡ä¸Šæ˜¾ç¤º `runningCount / totalCount` æˆ–ç®€å•çš„å°å¾½æ ‡ã€‚

### äº¤äº’é€»è¾‘

- ç‚¹å‡»å›¾æ ‡ï¼š
  - è‹¥è¿›åº¦å¯¹è¯æ¡†å…³é—­ â†’ æ‰“å¼€ï¼›  
  - è‹¥å·²æ‰“å¼€ â†’ å…³é—­ï¼›  
  - ä½¿ç”¨ Teleportï¼Œå°†å¯¹è¯æ¡†æ’å…¥åˆ° `body`ã€‚

---

## 5.3 è¿›åº¦å¯¹è¯æ¡†

### å¸ƒå±€æ¨¡å¼

- **å¸ƒå±€**ï¼šæ‚¬æµ®å±…ä¸­å¯¹è¯æ¡†ï¼Œå®½åº¦çº¦ 480â€“640pxï¼Œé«˜åº¦è‡ªé€‚åº”ï¼Œå¸¦æ»šåŠ¨ã€‚  
- **ç»“æ„**ï¼š
  1. æ ‡é¢˜æ ï¼š`ğŸ“Š MinerU OCR ä»»åŠ¡è¿›åº¦` + å…³é—­æŒ‰é’®ã€‚  
  2. å†…å®¹åŒºï¼šä»»åŠ¡åˆ—è¡¨ï¼ŒæŒ‰æ—¶é—´å€’åºã€‚  
  3. é¢„ç•™åº•éƒ¨æ“ä½œï¼ˆæœ¬è½®å¯ä»¥ä¸å®ç°ä»»ä½•æŒ‰é’®ï¼‰ã€‚

### ä»»åŠ¡è¡ŒçŠ¶æ€

å¯¹äºæ¯ä¸ª `MineruTask`ï¼š

- **Running / Pending**ï¼š
  - æ˜¾ç¤ºï¼š  
    - æ–‡ä»¶åï¼ˆæ¥è‡ª `fileName`ï¼‰ï¼›  
    - çŠ¶æ€æ ‡ç­¾ï¼š`æ’é˜Ÿä¸­` / `è§£æä¸­`ï¼›  
    - è‹¥æœ‰ `progress`ï¼š`extractedPages / totalPages` + è¿›åº¦æ¡ã€‚  

- **Done**ï¼š
  - æ˜¾ç¤ºï¼š  
    - çŠ¶æ€æ ‡ç­¾ï¼š`å·²å®Œæˆ`  
    - è‹¥ `resultLocalPath` å·²å­˜åœ¨ï¼šå¯æ·»åŠ å°æ ‡è®°ï¼ˆä¾‹å¦‚â€œå·²ä¸‹è½½â€æ–‡å­—ï¼‰ã€‚  

- **Failed**ï¼š
  - æ˜¾ç¤ºï¼š  
    - çŠ¶æ€æ ‡ç­¾ï¼š`å¤±è´¥`  
    - ä¸€è¡Œç²¾ç®€çš„é”™è¯¯ä¿¡æ¯ï¼ˆæ¥è‡ª `errorMsg`ï¼‰ï¼Œå¦‚è¿‡é•¿å¯æŠ˜å ã€‚  
  - é¢„ç•™ä¸€ä¸ªâ€œé‡è¯•â€æŒ‰é’®ä½ç½®ï¼ˆæœ¬è½®å¯ä»¥å…ˆä¸å®ç°è¡Œä¸ºï¼Œè®©æŒ‰é’®éšè—æˆ–ç¦ç”¨ï¼‰ã€‚

### ç©ºæ€

- å½“ä»»åŠ¡åˆ—è¡¨ä¸ºç©ºæ—¶ï¼š  
  - æ˜¾ç¤ºæ’ç”»/å›¾æ ‡ + æ–‡æ¡ˆï¼šâ€œå½“å‰æ²¡æœ‰ MinerU OCR ä»»åŠ¡â€ã€‚

---

# Phase 6ï¼šå¼‚å¸¸å¤„ç†ä¸éªŒæ”¶æ ‡å‡†

## 6.1 å¼‚å¸¸åœºæ™¯ä¸ç­–ç•¥

| åœºæ™¯ | æ£€æµ‹æ–¹å¼ | åº”ç”¨è¡Œä¸º |
|------|----------|----------|
| æ–­ç½‘ / MinerU ä¸å¯è¾¾ | HTTP è¯·æ±‚è¶…æ—¶/ç½‘ç»œé”™è¯¯ | åœ¨ `mineru.service` ä¸­æ•è·å¼‚å¸¸ï¼Œä¸å´©æºƒä¸»è¿›ç¨‹ã€‚å¯¹åº”ä»»åŠ¡ `errorMsg = 'ç½‘ç»œé”™è¯¯ï¼Œç¨åè‡ªåŠ¨é‡è¯•'`ã€‚è½®è¯¢å™¨ä¸‹ä¸€è½®ç»§ç»­å°è¯•ã€‚ |
| API Key æ— æ•ˆ | MinerU è¿”å›é”™è¯¯ç  `A0202 / A0211` | å°†ä»»åŠ¡æ ‡è®°ä¸º `failed`ï¼Œ`errorMsg` æç¤ºâ€œAPI Key æ— æ•ˆæˆ–å·²è¿‡æœŸâ€ï¼›åœ¨è®¾ç½®é¡µæµ‹è¯•è¿æ¥æ—¶ä¹Ÿæ˜ç¡®æç¤ºã€‚ |
| æ–‡ä»¶å¤§å°/é¡µæ•°è¶…é™ | é”™è¯¯ç  `-60005 / -60006` | æ ‡è®°ä»»åŠ¡ä¸º `failed`ï¼Œé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºé™åˆ¶è¯´æ˜ã€‚ |
| ç¨‹åºå…³é—­ | åº”ç”¨é€€å‡ºäº‹ä»¶ | `mineru.service` å°†å½“å‰ä»»åŠ¡ï¼ˆå°¤å…¶æ˜¯ `pending/running`ï¼‰åºåˆ—åŒ–å†™å…¥ `@AppData/.mineru-tasks.json`ã€‚ |
| ç¨‹åºé‡å¯ | å¯åŠ¨æ—¶åŠ è½½ cache | æ¢å¤æœªå®Œæˆä»»åŠ¡ï¼Œè‡ªåŠ¨é‡æ–°è½®è¯¢ã€‚ |
| ç»“æœä¸‹è½½å¤±è´¥ | ä¸‹è½½ `full_zip_url` æ—¶ç½‘ç»œé”™è¯¯æˆ– 4xx/5xx | ä»»åŠ¡ä»ä¿æŒ `done` çŠ¶æ€ï¼Œä½† `resultLocalPath` ä¸ºç©ºï¼Œ`errorMsg` æç¤ºâ€œç»“æœä¸‹è½½å¤±è´¥ï¼Œå¯ç¨åé‡è¯•â€ã€‚ |

---

## 6.2 éªŒæ”¶æ ‡å‡†ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰

- **ä»»åŠ¡å‘èµ·**  
  - [ ] åœ¨ PDF ä¸Šç‚¹å‡»â€œä¸€é”®ä½¿ç”¨ MinerU OCRâ€åï¼Œå‰ç«¯ä¸é˜»å¡ UIï¼Œä»»åŠ¡å‡ºç°åœ¨è¿›åº¦å¯¹è¯æ¡†ä¸­ï¼ŒçŠ¶æ€ä» `uploading` â†’ `pending` â†’ `running` â†’ `done/failed` åˆç†å˜åŒ–ã€‚  
  - [ ] åœ¨ç½‘ç»œæ­£å¸¸ & æ–‡ä»¶åˆæ³•æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿçœ‹åˆ°è¿›åº¦æ¡éš `extractedPages/totalPages` å¢é•¿æ›´æ–°ã€‚

- **è½®è¯¢è¡Œä¸º**  
  - [ ] å­˜åœ¨ä»»æ„ `pending/running` ä»»åŠ¡æ—¶ï¼Œè½®è¯¢å™¨è‡ªåŠ¨å·¥ä½œï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°ã€‚  
  - [ ] æ‰€æœ‰ä»»åŠ¡è¿›å…¥ `done/failed` ä¸”ç»“æœä¸‹è½½å®Œæˆåï¼Œè½®è¯¢å™¨è‡ªåŠ¨åœæ­¢ï¼Œä¸å†å ç”¨æ— è°“èµ„æºã€‚

- **é…ç½®è¡Œä¸º**  
  - [ ] åœ¨è®¾ç½®é¡µâ€œæ‰©å±• â†’ MinerUâ€ä¿®æ”¹è½®è¯¢é—´éš”åï¼Œæ–°çš„é—´éš”å€¼åœ¨ä¸‹ä¸€æ¬¡ä»»åŠ¡æäº¤æˆ–è€…ä¸‹ä¸€æ¬¡è½®è¯¢ tick åç”Ÿæ•ˆã€‚  
  - [ ] ä¿®æ”¹ API Key åï¼Œæ–°çš„ä»»åŠ¡ä½¿ç”¨æ–°çš„ Keyï¼Œæ—§ä»»åŠ¡å¦‚å·²æäº¤åˆ™ä¸å—å½±å“ã€‚

- **æ¢å¤è¡Œä¸º**  
  - [ ] åº”ç”¨åœ¨ä»»åŠ¡è¿›è¡Œä¸­è¢«å…³é—­å¹¶é‡å¯åï¼Œè¿›åº¦é¢æ¿èƒ½æ¢å¤æ˜¾ç¤ºè¿™äº›ä»»åŠ¡ï¼Œå¹¶ç»§ç»­è½®è¯¢ç›´åˆ°ç»“æŸã€‚  

---

å¦‚æœä½ è®¤å¯è¿™ä¸ªè¯¦ç»†è®¾è®¡ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥æŒ‰è¿™ä¸ªæ–¹æ¡ˆåˆ†è§£å…·ä½“å®ç°ä»»åŠ¡ï¼ˆä¸»è¿›ç¨‹æœåŠ¡ã€IPC/Preloadã€Storeã€è®¾ç½® UIã€è¿›åº¦å¯¹è¯æ¡†ï¼‰ï¼Œç„¶åå†å’Œä½ ä¸€èµ·é€æ­¥è½åœ°ä»£ç ã€‚